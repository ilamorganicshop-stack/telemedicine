{% extends 'accounts/base.html' %}

{% block title %}Hospital Admin{% endblock %}

{% block head_extra %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500;600;700&family=Sora:wght@400;500;600;700&display=swap" rel="stylesheet">
    {{ block.super }}
{% endblock %}

{% block messages %}{% endblock %}

{% block content %}
<div class="min-h-screen bg-slate-950 text-slate-100">
    <div class="relative min-h-screen">
        <div class="pointer-events-none absolute inset-0">
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(16,185,129,0.16),_transparent_55%)]"></div>
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_bottom_right,_rgba(14,165,233,0.12),_transparent_60%)]"></div>
            <div class="absolute inset-0 bg-[linear-gradient(to_right,_rgba(148,163,184,0.08)_1px,_transparent_1px),linear-gradient(to_bottom,_rgba(148,163,184,0.08)_1px,_transparent_1px)] bg-[size:44px_44px] opacity-30"></div>
        </div>

        <div class="relative flex min-h-screen">
            <aside class="hidden w-72 flex-col border-r border-white/10 bg-slate-950/80 px-6 py-8 backdrop-blur lg:flex">
                <div class="flex items-center gap-3">
                    <div class="flex h-11 w-11 items-center justify-center rounded-xl bg-emerald-500/90 font-semibold text-white" style="font-family: 'Sora', sans-serif;">
                        H
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-slate-100" style="font-family: 'Sora', sans-serif;">Hospital Admin</p>
                        <p class="text-xs uppercase tracking-[0.2em] text-slate-500">Care Console</p>
                    </div>
                </div>

                <div class="mt-6 rounded-2xl border border-white/10 bg-white/5 p-4">
                    <p class="text-xs uppercase tracking-[0.2em] text-emerald-300">Active Hospital</p>
                    <p class="mt-2 text-sm font-semibold text-white">{{ user.hospital.name|default:"Unassigned" }}</p>
                    <p class="text-xs text-slate-500">{{ user.email|default:user.username }}</p>
                </div>

                <div class="mt-8">
                    <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">Overview</p>
                    <nav class="mt-4 space-y-2 text-sm">
                        <a href="{% url 'accounts:hospital_admin_dashboard' %}" class="flex items-center gap-2 rounded-lg bg-emerald-500/15 px-3 py-2 text-emerald-300">
                            <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
                            Dashboard
                        </a>
                        <a href="{% url 'accounts:manage_appointments' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 text-slate-400 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Appointments
                        </a>
                    </nav>
                </div>

                <div class="mt-8">
                    <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">Management</p>
                    <nav class="mt-4 space-y-2 text-sm text-slate-400">
                        <a href="{% url 'accounts:manage_doctors' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Doctors
                        </a>
                        <a href="{% url 'accounts:manage_patients' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Patients
                        </a>
                        <a href="{% url 'accounts:manage_appointments' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Appointments
                        </a>
                    </nav>
                </div>

                <div class="mt-8">
                    <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">Actions</p>
                    <nav class="mt-4 space-y-2 text-sm text-slate-400">
                        <a href="{% url 'accounts:create_doctor' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Create Doctor
                        </a>
                        <a href="{% url 'accounts:create_patient' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Create Patient
                        </a>
                        <a href="{% url 'accounts:book_appointment' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Book Appointment
                        </a>
                    </nav>
                </div>

                <div class="mt-8">
                    <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">System</p>
                    <nav class="mt-4 space-y-2 text-sm text-slate-400">
                        <a href="#" class="flex items-center gap-2 rounded-lg px-3 py-2 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Settings
                        </a>
                        <a href="#" class="flex items-center gap-2 rounded-lg px-3 py-2 transition hover:bg-white/5 hover:text-slate-200">
                            <span class="h-2 w-2 rounded-full bg-slate-600"></span>
                            Reports
                        </a>
                    </nav>
                </div>

                <div class="mt-auto rounded-2xl border border-white/10 bg-white/5 p-4">
                    <p class="text-sm font-semibold text-slate-100">{{ user.get_full_name|default:user.username }}</p>
                    <p class="text-xs text-slate-400">{{ user.email|default:user.username }}</p>
                    <a href="{% url 'accounts:logout' %}" class="mt-3 inline-flex text-xs font-semibold text-rose-300 transition hover:text-rose-200">
                        Logout
                    </a>
                </div>
            </aside>

            <main class="flex-1 min-w-0 px-4 py-6 sm:px-6 sm:py-8 lg:px-10">
                <div class="lg:hidden">
                    <details class="group rounded-2xl border border-white/10 bg-white/5 px-4 py-3">
                        <summary class="flex cursor-pointer items-center justify-between text-sm font-semibold text-slate-100">
                            <span class="flex items-center gap-3">
                                <span class="flex h-9 w-9 items-center justify-center rounded-lg bg-emerald-500/90 text-sm font-semibold">H</span>
                                Hospital Menu
                            </span>
                            <span class="text-slate-400 transition group-open:rotate-180">^</span>
                        </summary>
                        <div class="mt-4 space-y-2 text-sm text-slate-300">
                            <a href="{% url 'accounts:hospital_admin_dashboard' %}" class="block rounded-lg px-3 py-2 transition hover:bg-white/5">Dashboard</a>
                            <a href="{% url 'accounts:manage_doctors' %}" class="block rounded-lg px-3 py-2 transition hover:bg-white/5">Doctors</a>
                            <a href="{% url 'accounts:manage_patients' %}" class="block rounded-lg px-3 py-2 transition hover:bg-white/5">Patients</a>
                            <a href="{% url 'accounts:manage_appointments' %}" class="block rounded-lg px-3 py-2 transition hover:bg-white/5">Appointments</a>
                            <a href="{% url 'accounts:create_doctor' %}" class="block rounded-lg px-3 py-2 transition hover:bg-white/5">Create Doctor</a>
                            <a href="{% url 'accounts:create_patient' %}" class="block rounded-lg px-3 py-2 transition hover:bg-white/5">Create Patient</a>
                            <a href="{% url 'accounts:book_appointment' %}" class="block rounded-lg px-3 py-2 transition hover:bg-white/5">Book Appointment</a>
                            <a href="{% url 'accounts:logout' %}" class="block rounded-lg px-3 py-2 text-rose-300 transition hover:bg-white/5 hover:text-rose-200">Logout</a>
                        </div>
                    </details>
                </div>

                {% if messages %}
                    <div class="mt-6 space-y-3">
                        {% for message in messages %}
                            {% if message.tags == 'error' %}
                                <div class="rounded-xl border border-red-400/30 bg-red-500/10 px-4 py-3 text-sm text-red-100">
                                    {{ message }}
                                </div>
                            {% elif message.tags == 'success' %}
                                <div class="rounded-xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100">
                                    {{ message }}
                                </div>
                            {% else %}
                                <div class="rounded-xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100">
                                    {{ message }}
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="mt-6">
                    {% block hospital_admin_content %}{% endblock %}
                </div>
            </main>
        </div>
    </div>
</div>
{% endblock %}
